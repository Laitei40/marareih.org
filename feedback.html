<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MLP â€” Feedback</title>
  <meta name="description" content="Mara Language Preservation community feedback form.">

  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/feedback.css">
  <link rel="icon" href="assets/logo.svg" type="image/svg+xml">
</head>

<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="site-header">
    <div class="container nav-row">
      <a class="brand" href="index.html" aria-label="Mara Language Preservation homepage">
        <img src="assets/logo.svg" width="36" height="36" alt="Mara Language Preservation logo">
        <span>Mara Language Preservation</span>
      </a>
    </div>
  </header>

  <main id="main" class="container">
    <article class="card feedback-card">
      <h1>Mara Language Preservation (MLP) Community Feedback</h1>
      <p class="lede">
        Your feedback helps us improve and grow the Mara Language Preservation initiative.
        All responses are confidential.
      </p>

      <!-- ===================== FORM ===================== -->
      <form id="mlp-google-form" novalidate>

        <label for="name">Name (Optional)</label>
        <input id="name" name="entry.375119448" type="text" placeholder="Your name">

        <label for="email">Email (Optional)</label>
        <input id="email" name="entry.1555416240" type="email" placeholder="name@example.com">

        <label for="country">Are you from? (Optional)</label>
        <input id="country" name="entry.578966156" type="text" placeholder="Country or place">

        <label for="message">Your feedback</label>
        <textarea
          id="message"
          name="entry.763811229"
          rows="6"
          required
          placeholder="Share your thoughts or suggestions">
        </textarea>

        <fieldset>
          <legend><strong>Can we contact you about your feedback?</strong></legend>
          <label>
            <input type="radio" name="entry.1307833837" value="Yes" required>
            Yes
          </label>
          <label>
            <input type="radio" name="entry.1307833837" value="No">
            No
          </label>
        </fieldset>

       <fieldset>
        <label>
            <input
            type="checkbox"
            name="entry.1760276680"
            value="I want to hear about MLP updates via email.">
            I want to hear about MLP updates via email.
        </label>
        </fieldset>

        <div class="actions">
          <button type="submit" id="mlp-submit">Submit feedback</button>
          <div id="mlp-status" class="status" aria-live="polite"></div>
        </div>
      </form>
      <!-- =================== END FORM =================== -->

    </article>
  </main>

  <footer class="site-footer">
    <div class="container footer-row">
      <p>Â© <span id="year">2026</span> Mara Language Preservation</p>
      <nav><a href="index.html">Home</a></nav>
    </div>
  </footer>

  <!-- ===================== CONFIG ===================== -->
  <script>
    // ðŸ”´ MUST be your real Worker URL
    window.GOOGLE_FORM_PROXY = 'https://mlp-form-proxy.teiteipara.workers.dev';
  </script>

  <!-- ===================== LOGIC ====================== -->
  <script>
    (function () {
      const form   = document.getElementById('mlp-google-form');
      const status = document.getElementById('mlp-status');
      const submit = document.getElementById('mlp-submit');

      form.addEventListener('submit', async function (e) {
        e.preventDefault();

        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }

        if (!window.GOOGLE_FORM_PROXY) {
          status.textContent = 'Submission service unavailable.';
          return;
        }

        submit.disabled = true;
        status.textContent = 'Submittingâ€¦';

        try {
          const fd = new FormData(form);
          const params = new URLSearchParams();
          for (const [k, v] of fd.entries()) params.append(k, v);

          const res = await fetch(window.GOOGLE_FORM_PROXY, {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: params.toString()
          });

          const result = await res.json();

          if (result.success) {
            status.textContent = 'Thank you â€” your feedback was received!';
            form.reset();
          } else {
            status.textContent = 'Submission failed. Please try again.';
            console.error(result);
          }
        } catch (err) {
          status.textContent = 'Submission failed. Please try again.';
          console.error(err);
        } finally {
          submit.disabled = false;
        }
      });
    })();
  </script>

</body>
</html>
